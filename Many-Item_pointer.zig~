// Как оказалось в Zig попросту разные указатели для массивов и единичных значений
const expect = @import("std").testing.expect;

fn MultOnTwo(buffer: [*]u8, byte_count: usize) void {
    var i: usize = 0;
    while (i < byte_count) : (i += 1) buffer[i] *= 2;
} // От себя ничего нет это функция из гайда с измененныйм называнием

test "Проверка массива переменного значения" {
    var buffer: [100]u8 = [_]u8{1} ** 100;
    const buffer_ptr: *[100]u8 = &buffer;

    try expect(buffer_ptr[2] == 1);

    MultOnTwo(buffer_ptr, buffer.len);
    try expect(buffer_ptr[2] == 2);
}

test "И так. Ещё раз" {
    const buffer: [10]u8 = [1]u8{1} ** 10;
    const ptr_bfr: *const [10]u8 = &buffer;

    try expect(ptr_bfr[2] == 1);
}

test "Попробуем указатель на массив неизвестной длинны ..." {
    const buffer = [1]u8{1} ** 10;
    const ptr_bfr: *const []u8 = &buffer;

    try expect(ptr_bfr[2] == 1);
}
